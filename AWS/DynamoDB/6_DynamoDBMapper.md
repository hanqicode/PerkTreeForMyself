# Java: DynamoDBMapper
Link: https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBMapper.html

The DynamoDBMapper class enables you to access your tables; 
perform various create, read, update, and delete (CRUD) operations; 
and execute queries.

The DynamoDBMapper class does not allow you to create, update, or delete tables.
To perform those tasks, use the low-level SDK for Java interface instead.

## Basic Usage
For basic usage, we can refer to file **ProgrammaticInterfaces.md**.

## Java Annotations
Link: https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBMapper.Annotations.html

Here we will introduce some basic annotations.

#### DynamoDBTable
Identifies the target table in DynamoDB.

```java
@DynamoDBTable(tableName = "Books")
public class BookItem {
    // omitted here
}
```

#### DynamoDBHashKey
Maps a class property to the partition key of the table. 
The property must be one of the scalar string, number, or binary types. The property can't be a collection type.

```java
@DynamoDBTable(tableName = "Books")
public class BookItem {
    
    @DynamoDBHashKey(attributeName = "Id")
    private int id;
}
```

#### DynamoDBAttribute
Maps a property to a table attribute. 

```java
@DynamoDBAttribute(attributeName = "Author")
private String author;
```

Sometimes, we will use different naming convention in Java and DDB. So, we can use `attributeName` to decouple them.

#### DynamoDBAutoGeneratedKey
Marks a partition key or sort key property as being autogenerated. 
DynamoDBMapper generates a random UUID when saving these attributes. 
Only `String` properties can be marked as autogenerated keys.

```java
@DynamoDBTable(tableName = "Books")
public class BookItem {
    
    @DynamoDBHashKey(attributeName = "Id")
    @DynamoDBAutoGeneratedKey
    private String id;
}
```

## DynamoDBMapper Class
Link: https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBMapper.Methods.html

Here are some basic operations.

#### save: create/update
If an item that has the same primary key does not exist, this method creates a new item in the table. 
If an item that has the same primary key exists, it updates the existing item. 

#### load: read
Retrieves an item from a table. You must provide the primary key of the item that you want to retrieve.

We are choose to use `Strongly Consistent Read`. Refer to **ReadConsistency.md**.

```java
CatalogItem item = mapper.load(CatalogItem.class, item.getId(), 
                new DynamoDBMapperConfig(DynamoDBMapperConfig.ConsistentReads.CONSISTENT)); 
```

#### delete
Deletes an item from the table. You must pass in an object instance of the mapped class.

#### query
This method requires you to provide a partition key value and a query filter that is applied on the sort key.

#### scan
Scans an **entire table** or a secondary index. You can optionally specify a FilterExpression to filter the result set.
